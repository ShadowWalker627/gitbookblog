# 首屏加载

首屏时间（First Contentful Paint），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容

在页面渲染的过程，导致加载速度慢的因素可能如下：

* 网络延时问题
* 资源文件体积是否过大
* 资源是否重复发送请求去加载了
* 加载脚本的时候，渲染内容堵塞了

## 解决方案

* 减小入口文件体积
常用的手段是路由懒加载，把不同路由对应的组件分割成不同的代码块，使得入口文件变小，加载速度大大增加

* 静态资源本地缓存
* UI框架按需加载
* 避免组件重复打包
通过webpack的minChunks，将使用次数较高的包抽离放入公共依赖文件，避免重复加载
* 图片资源的压缩
可以使用在线字体图标，或者雪碧图，将众多小图标合并到同一张图上，用以减轻http请求压力。
* 开启GZip压缩
* 使用SSR

## 资源加载优化 和 页面渲染优化

### 资源加载优化

#### 1. 减小资源体积

代码压缩、Gzip、图片压缩、代码拆分

#### 2. 减少http请求次数

http强缓存、ServiceWorker、本地缓存（localstorage等）、合并请求（nginx-http-concat，雪碧图）

#### 3. 提高http请求速度

CDN加速、http协商缓存、DNS Prefetch、HTTP2

#### 4. 优化资源加载时机

按需加载、懒加载、预加载

#### 5. 优化资源、内容加载方式

客户端内的H5考虑离线包等方式、内容直出

### 页面渲染优化

#### 1. 优化html代码

* 将script标签放在body底部
* style标签放到head中
* 减少dom数量

#### 2. 优化js、css代码

* 减少重排重绘
* 降低css选择器复杂度

#### 优化动画效果

* 使用requestAnimationFrame
* 使用transform和opacity属性实现动画
